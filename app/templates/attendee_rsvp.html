{% extends "base.html" %} {%block coverimage %}url("{{
url_for("static",filename="images/index.jpg") }}{% endblock %} {% block content %}

<section class="hero is-fullheight is-flex-touch">
    <div class="hero-body">
        <div class="">
            <p class="subtitle is-size-3">
                {{attendee.attendee}}, you are invited to attend
            </p>

            <p class="title is-size-1 glitch" data-text="{{event.event}}">
                {{event.event}}
            </p>
            <p class="subtitle is-size-3">
                {{event.date | humanize_ts}}
                <br />{{event.location}}
            </p>

            <p class="subtitle is-size-5">What am I inviting you too?</p>
            <p class="content" style="white-space: pre-line">{{event.description}}</p>

            <p class="subtitle is-size-5">What is this website?</p>
            <p class="content">
                This is your private event page for {{event.event}}. I have you marked
                down as STATUS_UNKNOWN If you wanna bring a +1 text me their details.
                ATTENDING_UNKOWN
            </p>

            <form
                name="submit_rsvp"
                method="post"
                data-netlify="true"
                data-netlify-honeypot="bot-field"
                @submit.prevent="handleSubmit"
            >
                <input
                    type="hidden"
                    name="form-name"
                    value="{{event_junction_public_id}}"
                />
                <div class="columns has-text-centered">
                    <div class="column">
                        <button
                            type="submit"
                            id="attending"
                            name="rsvp"
                            value="attending"
                            data-text="Attending"
                        >
                            &#128525;
                        </button>
                    </div>
                    <div class="column has-text-centered">
                        <button
                            type="submit"
                            id="maybe"
                            name="rsvp"
                            value="maybe"
                            data-text="Maybe"
                        >
                            &#129300;
                        </button>
                    </div>
                    <div class="column has-text-centered">
                        <button
                            type="submit"
                            id="not_attending"
                            name="rsvp"
                            value="not_attending"
                            data-text="Can't go."
                        >
                            &#128546;
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

{% endblock %} {% block js %}

<script>
    export default {
      export default {
      name: "PollForm",

      methods: {
        handleSubmit () {
          //some stuff
          fetch('/', {...})
          .then(res => {
            this.$router.push('thanks')
          })
          .catch(err => {
            this.$router.push('404')
          })
        }
      }
    }
</script>

{% endblock %}
